<html>

<head>
    <title></title>
</head>

<body>
    <form action="/character_upload" target="_self" autocomplete="off" method="post" enctype="text/plain">
        <textarea id="char_file" name="char_file">Drop files here</textarea>
        <input type="submit" id="submit" value="Upload Character" />
        <a href="/character_upload" id="reset_link">Reset</a>
    </form>
</body>
<script>
    function handleFileSelect(evt) {
        evt.stopPropagation();
        evt.preventDefault();

        var files = evt.dataTransfer.files; // FileList object.
        var reader = new FileReader();
        reader.onload = function (event) {
            document.getElementById('char_file').value = event.target.result;
        }
        reader.readAsText(files[0], "UTF-8");
    }

    function handleDragOver(evt) {
        evt.stopPropagation();
        evt.preventDefault();
        evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
    }

    // Setup the dnd listeners.
    var dropZone = document.getElementById('char_file');
    dropZone.addEventListener('dragover', handleDragOver, false);
    dropZone.addEventListener('drop', handleFileSelect, false);
</script>

</html>
